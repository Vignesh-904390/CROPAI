<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Coconut Disease Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
      /* Global Styling */
      body {
          margin: 0;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: #f8fafc;
          color: #333;
      }
      header {
          background: linear-gradient(135deg, #2d572c, #4caf50);
          color: white;
          padding: 20px;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      }
      header h1 {
          margin: 0;
          font-size: 2rem;
      }
      header p {
          margin-top: 5px;
          font-size: 1.1rem;
      }

      .container {
          max-width: 1000px;
          margin: 30px auto;
          padding: 0 20px;
      }

      .upload-section {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
      }

      .card {
          background: white;
          border-radius: 12px;
          padding: 20px;
          box-shadow: 0 4px 10px rgba(0,0,0,0.08);
          text-align: center;
          transition: transform 0.2s ease;
      }
      .card:hover {
          transform: translateY(-5px);
      }
      .card h3 {
          color: #2d572c;
          margin-bottom: 10px;
      }
      .card input[type="file"] {
          margin: 15px 0;
      }
      .card button {
          background: #2d572c;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 1rem;
          transition: background 0.2s ease;
      }
      .card button:hover {
          background: #256427;
      }

      /* Results Styling */
      .result-box {
          background: white;
          padding: 25px;
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          margin-top: 30px;
          animation: fadeIn 0.5s ease-in-out;
      }
      .result-box h2 {
          text-align: center;
          color: #2d572c;
      }
      .result-box ul {
          margin-left: 20px;
      }

      .error-box {
          background: #ffe6e6;
          border: 1px solid #f5c2c7;
          padding: 15px;
          border-radius: 8px;
          margin: 20px 0;
          color: #a94442;
      }

      .success-box {
          background: #e6ffe6;
          border: 1px solid #b2d8b2;
          padding: 15px;
          border-radius: 8px;
          margin: 20px 0;
          color: #2d572c;
      }

      footer {
          background: #2d572c;
          color: white;
          text-align: center;
          padding: 15px;
          margin-top: 40px;
          font-size: 0.9rem;
      }

      /* Animations */
      @keyframes fadeIn {
          from {opacity: 0; transform: translateY(10px);}
          to {opacity: 1; transform: translateY(0);}
      }

      /* Responsive */
      @media(max-width:600px) {
          header h1 { font-size: 1.5rem; }
      }
  </style>
</head>
<body>

<header>
    <h1>🌴 Coconut Tree Disease Detection</h1>
    <p>Upload your coconut leaf image or video to detect diseases instantly</p>
</header>

<div class="container">

    <!-- Upload Options -->
    <div class="upload-section">
        <div class="card">
            <h3>📷 Upload Image</h3>
            <form action="/predict" method="POST" enctype="multipart/form-data">
                <input type="file" name="image" accept="image/*" required>
                <br>
                <button type="submit">Analyze Image</button>
            </form>
        </div>

        <div class="card">
            <h3>🎥 Upload Video</h3>
            <form action="/predict_video" method="POST" enctype="multipart/form-data">
                <input type="file" name="video" accept="video/*" required>
                <br>
                <button type="submit">Analyze Video</button>
            </form>
        </div>
    </div>

    <!-- Error Messages -->
    {% if error_message %}
    <div class="error-box">
        ❌ {{ error_message }}
    </div>
    {% endif %}

    <!-- Single Prediction -->
    {% if prediction %}
    <div class="result-box success-box">
        <h2>✅ Predicted Disease: {{ prediction }}</h2>
        {% if explanation %}<p><strong>🩺 Explanation:</strong> {{ explanation }}</p>{% endif %}
        {% if details.water %}<p><strong>💧 Water:</strong> {{ details.water }}</p>{% endif %}
        {% if details.fertilizer %}<p><strong>🌱 Fertilizer:</strong> {{ details.fertilizer }}</p>{% endif %}
        {% if details.medicine %}
            <p><strong>💊 Medicine:</strong></p>
            <ul>{% for med in details.medicine %}<li>{{ med }}</li>{% endfor %}</ul>
        {% endif %}
        {% if details.organic_medicine %}
            <p><strong>🌿 Organic Medicine:</strong></p>
            <ul>{% for org in details.organic_medicine %}<li>{{ org }}</li>{% endfor %}</ul>
        {% endif %}
        {% if details.prevention %}<p><strong>🛡️ Prevention:</strong> {{ details.prevention }}</p>{% endif %}
        {% if image_url %}
            <p><strong>Uploaded Image:</strong></p>
            <img src="{{ image_url }}" width="300">
        {% endif %}
    </div>
    {% endif %}

    <!-- Multi Prediction -->
    {% if multi_predictions %}
    <div class="result-box success-box">
        <h2>🩺 Detected Diseases</h2>
        {% for item in multi_predictions %}
            <h3 style="color: brown;">{{ item.label }}</h3>
            {% if item.details.explanation %}<p><strong>📝 Explanation:</strong> {{ item.details.explanation }}</p>{% endif %}
            {% if item.details.water %}<p><strong>💧 Water:</strong> {{ item.details.water }}</p>{% endif %}
            {% if item.details.fertilizer %}<p><strong>🌱 Fertilizer:</strong> {{ item.details.fertilizer }}</p>{% endif %}
            {% if item.details.medicine %}
                <p><strong>💊 Medicine:</strong></p>
                <ul>{% for med in item.details.medicine %}<li>{{ med }}</li>{% endfor %}</ul>
            {% endif %}
            {% if item.details.organic_medicine %}
                <p><strong>🌿 Organic Medicine:</strong></p>
                <ul>{% for org in item.details.organic_medicine %}<li>{{ org }}</li>{% endfor %}</ul>
            {% endif %}
            {% if item.details.prevention %}<p><strong>🛡️ Prevention:</strong> {{ item.details.prevention }}</p>{% endif %}
            <hr>
        {% endfor %}
        {% if image_url %}
            <p><strong>Uploaded Video Frame:</strong></p>
            <img src="{{ image_url }}" alt="Video Frame" width="300">
        {% endif %}
    </div>
    {% endif %}
</div>
<footer style="text-align: center; padding: 10px; background: #f8f8f8; color: #222;">
    © 2025 Coconut Disease Detection | Built with 🌴 & ❤️ for Farmers <br>
    <span style="font-weight: bold; color: #007bff;">Powered by TDA TECHNOLOGY</span>
</footer>

</body>
</html>
